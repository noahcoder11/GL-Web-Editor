<!DOCTYPE html>
<html>

    <head>

        <title>Learn 3D Graphics</title>
        <meta charset="utf-8">
        
        <link rel = "stylesheet" href = "main.css"></link>
        
    </head>

    <body>
        <div id = "editor-container">
            <div class = "editor">
                <div class = "editor-title">Javascript Code</div>
                <div class = "editor-content" id = "js-code">var vertices = [
    0, 0, 0,
    1, 0, 0,
    1, 1, 0,
    0, 1, 0,
    
    0, 0, -1,
    1, 0, -1,
    1, 1, -1,
    0, 1, -1,
],
indices = [
    1, 0, 2,
    0, 3, 2,
    //4, 5, 6,
    //4, 6, 7,
],
colors = [
    255,   0, 100, 255,
    200, 255, 100, 255,
        0, 100, 255, 255,
    255, 255, 255, 255,

    0, 0, 0, 255,
    255, 255, 255, 255,
    255, 255, 255, 255,
    255, 255, 255, 255,
],
t_coords = [
    0, 0,
    1, 0,
    1, 1,
    0, 1,

    0, 0,
    1, 0,
    1, 1,
    0, 1,
],

// Create the buffers
vBuffer = vertices,
tBuffer = new VariableLengthBuffer(indices, 3),

// Create the shader objects
fragShaderObject = new ShaderObject(),
vertexShaderObject = new ShaderObject();

vertexShaderObject.attribute("position", vertices, 3)

// Set the fragment shader parameters
fragShaderObject.varying("color", colors, 4)

fragShaderObject.varying("t-coords", t_coords, 2);

// Set the vertex shader parameters
vertexShaderObject.uniform("projection", GL.getProjection(100, width/height, 0.1, 1000));</div>
            </div>

            <div class = "editor">
                <div class = "editor-title">Vertex Shader</div>
                <div class = "editor-content" id = "v-shader">var scl = 200;
// Retrieve attribute with "@attributeName"
var vertex = @position;

// Retrieve uniform with "#uniformName"
var projection = #projection;

console.log(projection)

vertex[0] += 2.5;
vertex[1] += 0.5;
vertex[0] *= scl;
vertex[1] *= scl;

// Simply return the vertex after performing any transformations
return vertex;</div>
            </div>

            <div class = "editor">
                <div class = "editor-title">Fragment Shader</div>
                <div class = "editor-content" id = "f-shader">// Retrieve varying with "$varyingName"
var color = $color;

// Return pixel color
return color;</div>
            </div>
        </div>

        <div id = "output-container">
            <div style = "width: 50%;height: 480px;border-radius: 10px;margin: 15px;margin-top: 100px;background: white;">
                <div class = "editor-title">Output</div>
                <canvas id = "output"></canvas>
                <div id = "output-options">
                    <button onclick = "runCode()" class = "option-button">Run</button>
                    <button onclick = "saveCode()" class = "option-button">Save</button>
                    <div class = "flex-spacer"></div>
                    <div style = "color: white;font-family:sans-serif;font-size:12px;">Live Update (may be slower): <input id="live" type = "checkbox"></div>
                </div>
            </div>

            <div style = "width: 50%;height: 518px;border-radius: 10px;margin: 15px;margin-top: 100px;background: rgb(64, 64, 64);">
                <div class = "editor-title">Console</div>
                <div id = "console"></div>
            </div>
        </div>

        
        
        <script src="https://cdn.jsdelivr.net/npm/gpu.js@latest/dist/gpu-browser.min.js"></script>
        <script src = "https://ajaxorg.github.io/ace-builds/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
        <script src = "lib/gl.js"></script>
        <script src = "main.js"></script>
    </body>

</html>